# ひまわり8号 RGB合成ガイド

## はじめに
ひまわり8号の16バンドを組み合わせることで、様々な気象現象を可視化できます。

## 主要なRGB合成

### 1. トゥルーカラー（自然色）
人間の目で見た色に最も近い表現
- **用途**: 一般的な雲の観察、陸地・海洋の識別
- **構成**:
  - 赤: B03 (0.64μm) - 赤色可視光
  - 緑: B02 (0.51μm) - 緑色可視光  
  - 青: B01 (0.47μm) - 青色可視光

### 2. 雲物理RGB（Day Microphysics）
雲の種類や相（氷/水）を識別
- **用途**: 雲の種類判別、霧の検出
- **構成**:
  - 赤: B04 (0.86μm) - 近赤外
  - 緑: B07 (3.9μm) - 太陽光反射成分
  - 青: B13 (10.4μm) - 赤外（反転）
- **見え方**:
  - 厚い氷雲: 赤～オレンジ
  - 薄い氷雲: 緑がかった色
  - 水雲・霧: 白～黄色

### 3. 気団RGB（Airmass）
気団の境界や上空の流れを可視化
- **用途**: 前線解析、ジェット気流の把握
- **構成**:
  - 赤: B08-B10 (水蒸気差分)
  - 緑: B12-B13 (オゾン)
  - 青: B05 (1.6μm、反転)

### 4. 黄砂RGB（Dust）
黄砂を赤紫色で強調表示
- **用途**: 黄砂の検出と追跡
- **構成**:
  - 赤: B15-B13 (12.4-10.4μm)
  - 緑: B13-B11 (10.4-8.6μm)
  - 青: B13 (10.4μm)

## 実装手順

### 準備するもの
1. **st_render5_cpp** - 各バンドの画像生成
2. **ImageMagick** - RGB合成（推奨）
3. **ひまわりデータ** - B01～B16のHSDファイル

### 基本的な手順

1. **各バンドを白黒画像として出力**
   ```
   st_render5_cpp.exe hsdfile file B03.DAT.bz2 color 0 outpic band03.png
   st_render5_cpp.exe hsdfile file B02.DAT.bz2 color 0 outpic band02.png
   st_render5_cpp.exe hsdfile file B01.DAT.bz2 color 0 outpic band01.png
   ```

2. **ImageMagickで合成**
   ```
   magick band03.png band02.png band01.png -combine -gamma 0.5 truecolor.png
   ```

### 提供スクリプト

1. **rgb_composite.bat**
   - 基本的なRGB合成用
   - 各バンドの画像を個別に生成

2. **rgb_composite_imagemagick.bat**
   - ImageMagick使用前提
   - 複数のRGBレシピを選択可能

## 注意事項

### データの正規化
- **可視光バンド (B01-B06)**: 反射率として扱う
- **赤外バンド (B07-B16)**: 輝度温度として扱う
- バンド間で値の範囲が異なるため、適切な正規化が必要

### 空間解像度の違い
- B03: 0.5km（最高解像度）
- B01, B02, B04: 1km
- B05-B16: 2km

異なる解像度のバンドを合成する場合、リサンプリングが必要です。

### ガンマ補正
可視光バンドは通常γ=0.4～0.6で補正し、暗部を明るくします。

## 活用例

### 台風の観察
- **トゥルーカラー**: 全体構造の把握
- **雲物理RGB**: 眼の壁雲の構造解析
- **赤外B13**: 雲頂温度から発達度を推定

### 霧の検出
- **雲物理RGB**: 霧は黄色～白色で表示
- **B07-B13差分**: 夜間の霧検出に有効

### 黄砂の追跡
- **黄砂RGB**: 黄砂を赤紫色で強調
- **トゥルーカラー**: 濃い黄砂は茶色がかって見える