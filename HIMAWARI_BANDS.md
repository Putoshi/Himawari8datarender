# ひまわり8号/9号 バンド仕様とRGB合成ガイド

## バンド仕様一覧

| バンド | 中心波長 (μm) | 波長帯 | 用途 | 空間解像度 |
|--------|--------------|--------|------|-----------|
| B01 | 0.47 | 可視青 | エアロゾル、海色 | 1km |
| B02 | 0.51 | 可視緑 | 植生、海色 | 1km |
| B03 | 0.64 | 可視赤 | 植生、下層雲・霧 | 0.5km |
| B04 | 0.86 | 近赤外 | 植生、エアロゾル | 1km |
| B05 | 1.6 | 近赤外 | 雲相判別、雪氷 | 2km |
| B06 | 2.3 | 近赤外 | 雲粒径、土地利用 | 2km |
| B07 | 3.9 | 短波長赤外 | 下層雲・霧、林野火災 | 2km |
| B08 | 6.2 | 水蒸気 | 上・中層水蒸気 | 2km |
| B09 | 6.9 | 水蒸気 | 中層水蒸気 | 2km |
| B10 | 7.3 | 水蒸気 | 中・下層水蒸気 | 2km |
| B11 | 8.6 | 赤外 | 雲相判別、SO2 | 2km |
| B12 | 9.6 | 赤外 | オゾン | 2km |
| B13 | 10.4 | 赤外 | 雲画像、雲頂情報 | 2km |
| B14 | 11.2 | 赤外 | 雲画像、海面水温 | 2km |
| B15 | 12.4 | 赤外 | 雲画像、海面水温 | 2km |
| B16 | 13.3 | 赤外 | 雲頂高度、CO2 | 2km |

## 主要なRGB合成レシピ

### 1. True Color（自然色）
最も自然に近い色で表示
- **赤**: B03 (0.64μm)
- **緑**: B02 (0.51μm)  
- **青**: B01 (0.47μm)

### 2. Natural Color（疑似自然色）
B02がない場合の代替
- **赤**: B03 (0.64μm)
- **緑**: (B04×0.85 + B03×0.15)
- **青**: B01 (0.47μm)

### 3. Day Convective Storms（日中対流性雲）
積乱雲の発達を強調
- **赤**: B08-B10 (WV差分)
- **緑**: B07-B13 (IR差分)
- **青**: B03-B05 (NIR-VIS)

### 4. Airmass（気団）
気団の境界を可視化
- **赤**: B08-B10 (6.2-7.3μm)
- **緑**: B12-B13 (9.6-10.4μm)
- **青**: B05 (1.6μm inverted)

### 5. Day Microphysics（雲物理）
雲の種類と相を識別
- **赤**: B04 (0.86μm)
- **緑**: B07 (3.9μm solar component)
- **青**: B13 (10.4μm)

### 6. Dust（黄砂）
黄砂を赤色で強調
- **赤**: B15-B13 (12.4-10.4μm)
- **緑**: B13-B11 (10.4-8.6μm)
- **青**: B13 (10.4μm)

### 7. Night Microphysics（夜間雲物理）
夜間の雲と霧の識別
- **赤**: B15-B13 (12.4-10.4μm)
- **緑**: B13-B07 (10.4-3.9μm)
- **青**: B13 (10.4μm)

## RGB合成時の注意点

### データの正規化
1. **可視バンド (B01-B04)**: 反射率 0-100%
2. **赤外バンド (B07-B16)**: 輝度温度を適切にスケーリング

### ガンマ補正
- 可視バンド: γ = 0.4-0.6（暗部を明るく）
- 赤外バンド: 通常リニア（γ = 1.0）

### 空間解像度の調整
- B03は0.5km、他は1-2km
- アップサンプリングまたはダウンサンプリングが必要

## 実装例（疑似コード）

```
// True Color RGB合成
function createTrueColorRGB(B01, B02, B03) {
    // 各バンドを0-255にスケーリング
    R = normalize(B03, min=0, max=100) * 255
    G = normalize(B02, min=0, max=100) * 255  
    B = normalize(B01, min=0, max=100) * 255
    
    // ガンマ補正
    R = pow(R/255, 0.5) * 255
    G = pow(G/255, 0.5) * 255
    B = pow(B/255, 0.5) * 255
    
    return RGB(R, G, B)
}
```